/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => main_default
});
module.exports = __toCommonJS(main_exports);

// src/app.ts
var import_obsidian3 = require("obsidian");

// src/view.ts
var import_obsidian = require("obsidian");

// src/utils.ts
function pad(num) {
  if (!num)
    return "00";
  return num.toString().padStart(2, "0");
}
function formatDuration(ms) {
  if (ms < 0 || !Number.isFinite(ms))
    return "0:00:00";
  const totalSec = Math.floor(ms / 1e3);
  const h = Math.floor(totalSec / 3600);
  const m = Math.floor(totalSec % 3600 / 60);
  const s = totalSec % 60;
  let string = "";
  if (h) {
    string += `${h}h`;
  }
  if (m) {
    string += ` ${m}m`;
  }
  string += ` ${pad(s)}s`;
  return string.trim();
}
function isoNow() {
  return new Date().toISOString();
}
function parseISO(s) {
  if (!s)
    return null;
  const d = new Date(s);
  return isNaN(d.getTime()) ? null : d;
}
function formatTime(date) {
  if (!date)
    return "";
  const parsed = parseISO(date);
  return `${pad(parsed == null ? void 0 : parsed.getHours())}:${pad(parsed == null ? void 0 : parsed.getMinutes())}:${pad(parsed == null ? void 0 : parsed.getSeconds())}`;
}
function calcOwnDuration(startISO, endISO) {
  var _a, _b;
  const start = (_a = parseISO(startISO)) == null ? void 0 : _a.getTime();
  const end = (_b = endISO ? parseISO(endISO) : new Date()) == null ? void 0 : _b.getTime();
  if (!start || !end)
    return 0;
  return Math.max(0, end - start);
}

// src/view.ts
var VIEW_TYPE_TASK_TIMER = "task-timer-view";
var TaskTimerView = class extends import_obsidian.ItemView {
  constructor(leaf, controller) {
    super(leaf);
    this.controller = controller;
  }
  getViewType() {
    return VIEW_TYPE_TASK_TIMER;
  }
  getDisplayText() {
    return "Task Timer";
  }
  getIcon() {
    return "clock";
  }
  readAndClearInputValue() {
    const value = this.input.getValue();
    this.input.setValue("");
    return value;
  }
  updateView() {
    this.renderArchiveTable();
  }
  getContainer() {
    const container = this.containerEl;
    container.empty();
    return container;
  }
  renderBaseElements() {
    const container = this.getContainer();
    this.controlsEl = container.createDiv();
    this.archiveTableEl = container.createDiv({ cls: "task-timer-archive" });
  }
  renderControlElements() {
    const container = this.controlsEl;
    const controls = new import_obsidian.Setting(container);
    this.input = new import_obsidian.TextComponent(controls.controlEl).setPlaceholder("E.g. Buy a milk");
    this.input.inputEl.addEventListener("keyup", ({ key }) => {
      if (key === "Enter") {
        this.controller.appendTask(this.readAndClearInputValue());
      }
    });
    this.input.inputEl.classList.add("task-timer-input");
    this.subBtn = new import_obsidian.ButtonComponent(controls.controlEl).setIcon("play").setTooltip("Start task").setClass("task-timer-button").onClick(async () => {
      this.controller.appendTask(this.readAndClearInputValue());
    });
    this.endBtn = new import_obsidian.ButtonComponent(controls.controlEl).setIcon("pause").setTooltip("Stop all tasks").setClass("task-timer-button").onClick(async () => {
      this.controller.endAllTasks();
    });
    this.startBtn = new import_obsidian.ButtonComponent(controls.controlEl).setIcon("step-forward").setTooltip("Stop all and start task").setClass("task-timer-button").onClick(async () => {
      this.controller.startNewTask(this.readAndClearInputValue());
    });
  }
  async runInterval() {
    this.updateView();
    this.registerInterval(this.interval);
  }
  async onOpen() {
    const container = this.getContainer();
    container.classList.add("task-timer-container");
    console.log(4);
    this.renderBaseElements();
    this.renderControlElements();
    this.runInterval();
  }
  async onClose() {
    if (this.interval)
      window.clearInterval(this.interval);
  }
  renderArchiveTable() {
    const container = this.archiveTableEl;
    container.empty();
    const renderRow = (task) => {
      const isDone = !!task.endTime;
      const body = container.createDiv({
        cls: "task-timer-item"
      });
      const labelEl = body.createDiv({
        cls: [
          "task-timer-item__label-wrap",
          isDone ? "task-timer-item__label-wrap--done" : "task-timer-item__label-wrap--running"
        ]
      });
      (0, import_obsidian.setIcon)(labelEl.createSpan(), isDone ? "circle-check-big" : "loader-circle");
      labelEl.createEl("h3", {
        text: task.name,
        cls: "task-timer-item__label"
      });
      createTime(labelEl);
      body.createSpan({
        text: formatDuration(calcOwnDuration(task.startTime, task.endTime)),
        cls: "task-timer-item__date"
      });
      body.createEl("hr", { cls: "task-timer-item__delimiter" });
      function createTime(container2) {
        const dateWrapperEl = container2.createEl("p", {
          cls: "task-timer-item__time"
        });
        dateWrapperEl.createSpan({
          text: formatTime(task.startTime)
        });
        if (isDone) {
          dateWrapperEl.createSpan({
            text: " - "
          });
          dateWrapperEl.createSpan({
            text: formatTime(task.endTime)
          });
        }
      }
    };
    console.log(1);
    console.log(this.controller.getTasks());
    for (const e of this.controller.getTasks())
      renderRow(e);
  }
};

// src/model.ts
var TimerModel = class {
  constructor() {
    this.archive = /* @__PURE__ */ new Map();
  }
  initModel(archive) {
    archive.forEach((task) => {
      this.archive.set(task.id, task);
    });
  }
  getFlatTasks() {
    return Array.from(this.archive.values()).sort((a, b) => {
      if (a.startTime < b.startTime)
        return 1;
      return -1;
    });
  }
  getFlatRunningTasks() {
    return this.getFlatTasks().filter(({ endTime }) => !endTime);
  }
  getNewTask(name) {
    const id = Date.now() + "c";
    if (!(name == null ? void 0 : name.trim()))
      name = `Block ${this.getFlatTasks().length + 1}`;
    console.log(isoNow());
    return {
      id,
      name,
      startTime: isoNow(),
      endTime: null
    };
  }
  appendTask(name) {
    const root = this.getNewTask(name);
    this.archive.set(root.id, root);
  }
  endTaskById(id) {
    const task = this.archive.get(id);
    if (task) {
      task.endTime = isoNow();
    }
  }
  endAllTasks() {
    for (const task of this.getFlatRunningTasks()) {
      task.endTime = isoNow();
    }
  }
  renameTaskById(id, newName) {
    const task = this.archive.get(id);
    if (task) {
      task.name = newName.trim();
    }
  }
  intersectionDuration(prevTask, nextTask) {
    const startPrev = Date.parse(prevTask.startTime);
    const endPrev = Date.parse(prevTask.endTime || isoNow());
    const startNew = Date.parse(nextTask.startTime);
    const endNew = Date.parse(nextTask.endTime || isoNow());
    if (startPrev <= startNew && endNew <= endPrev) {
      return startPrev - endPrev;
    }
    if (startNew <= startPrev && endPrev <= endNew) {
      return startNew - endNew;
    }
    if (startPrev <= startNew && endPrev <= endNew) {
      return startPrev - endNew;
    }
    if (startNew <= startPrev && endNew <= endPrev) {
      return startNew - endPrev;
    }
    return 0;
  }
  getCurrentTasksDuration() {
    return 0;
  }
  getOverallRunningDuration() {
    return 0;
  }
};

// src/storage.ts
var import_obsidian2 = require("obsidian");
var ARCHIVE_PATH = "archive.md";
var TaskStorage = class {
  constructor(app) {
    this.app = app;
  }
  async loadArchive() {
    try {
      const file = this.app.vault.getFileByPath(ARCHIVE_PATH);
      if (!file)
        return [];
      const content = await this.app.vault.read(file);
      const match = content.match(/```json\n([\s\S]*?)\n```/);
      if (!match)
        return [];
      return this.fromTimekeepFormat(match[1]);
    } catch (e) {
      console.error(e);
      return [];
    }
  }
  async saveArchive(tasks) {
    var _a;
    const data = this.toTimekeepFormatJSON(tasks);
    const mdContent = `\`\`\`json
${data}
\`\`\``;
    const file = this.app.vault.getAbstractFileByPath(ARCHIVE_PATH);
    if (file instanceof import_obsidian2.TFile) {
      const content = await this.app.vault.read(file);
      const match = content.match(/```json\n([\s\S]*?)\n```/);
      let appendContent = "";
      const index = match ? (_a = match.index) != null ? _a : -1 : -1;
      if (match && index > -1) {
        appendContent = content.slice(0, index) + mdContent + content.slice(index + match[0].length);
      } else {
        appendContent = content + "\n" + mdContent;
      }
      await this.app.vault.modify(file, appendContent);
    } else {
      await this.app.vault.create(ARCHIVE_PATH, mdContent);
    }
  }
  toTimekeepFormatJSON(tasks) {
    return JSON.stringify({
      entries: tasks
    });
  }
  mapTimekeepEntry(entry, name) {
    if ("subEntries" in entry) {
      const { subEntries: _, ...task } = entry;
      return {
        ...task,
        name: name && !name.startsWith("Part") ? name : task.name,
        id: String(Math.random())
      };
    }
    return entry;
  }
  flattenTimekeepSubEntries(tasks, name) {
    if (!(tasks == null ? void 0 : tasks.length))
      return [];
    return tasks.flatMap((entry) => {
      var _a;
      if ((_a = entry.subEntries) == null ? void 0 : _a.length) {
        return this.flattenTimekeepSubEntries(entry.subEntries, entry.name);
      } else {
        return [this.mapTimekeepEntry(entry, name)];
      }
    });
  }
  fromTimekeepFormat(json) {
    try {
      const data = JSON.parse(json);
      const entries = data.entries;
      return this.flattenTimekeepSubEntries(entries);
    } catch (e) {
      console.log(e);
      return [];
    }
  }
};

// src/controller.ts
var TaskController = class {
  constructor(app) {
    this.app = app;
    this.storage = new TaskStorage(this.app);
    this.model = new TimerModel();
  }
  getTasks() {
    return this.model.getFlatTasks();
  }
  getRunningTasks() {
    return this.model.getFlatRunningTasks();
  }
  async loadArchive() {
    const archive = await this.storage.loadArchive();
    this.model.initModel(archive);
    console.log(2);
  }
  async initView(view) {
    this.view = view;
    console.log(3);
  }
  startNewTask(name) {
    this.model.endAllTasks();
    this.model.appendTask(name);
    this.view.updateView();
    this.storage.saveArchive(this.model.getFlatTasks());
  }
  appendTask(name) {
    this.model.appendTask(name);
    this.view.updateView();
    this.storage.saveArchive(this.model.getFlatTasks());
  }
  endAllTasks() {
    this.model.endAllTasks();
    this.view.updateView();
    this.storage.saveArchive(this.model.getFlatTasks());
  }
};

// src/app.ts
var TaskTimerPlugin = class extends import_obsidian3.Plugin {
  async onload() {
    this.app.workspace.onLayoutReady(() => {
      this.controller = new TaskController(this.app);
      this.registerView(
        VIEW_TYPE_TASK_TIMER,
        (leaf) => {
          this.controller.loadArchive();
          const view = new TaskTimerView(leaf, this.controller);
          this.controller.initView(view);
          return view;
        }
      );
      this.addRibbonIcon("clock", "Task Timer", () => this.activateView());
      this.addCommand({ id: "open-task-timer", name: "Open Task Timer", callback: () => this.activateView() });
    });
  }
  async onunload() {
    this.app.workspace.getLeavesOfType(VIEW_TYPE_TASK_TIMER).forEach((leaf) => leaf.detach());
  }
  async activateView() {
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_TASK_TIMER);
    if (leaves.length === 0) {
      let leaf = this.app.workspace.getRightLeaf(false);
      if (!leaf) {
        leaf = this.app.workspace.getLeaf(!import_obsidian3.Platform.isDesktop);
      }
      await leaf.setViewState({ type: VIEW_TYPE_TASK_TIMER, active: true });
    }
    this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(VIEW_TYPE_TASK_TIMER)[0]);
  }
};

// main.ts
var main_default = TaskTimerPlugin;
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvYXBwLnRzIiwgInNyYy92aWV3LnRzIiwgInNyYy91dGlscy50cyIsICJzcmMvbW9kZWwudHMiLCAic3JjL3N0b3JhZ2UudHMiLCAic3JjL2NvbnRyb2xsZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIlxuaW1wb3J0IFRhc2tUaW1lclBsdWdpbiBmcm9tIFwiLi9zcmMvYXBwXCI7XG5cbmV4cG9ydCBkZWZhdWx0IFRhc2tUaW1lclBsdWdpbjtcbiIsICJcbmltcG9ydCB7IFBsYXRmb3JtLCBQbHVnaW4sIFdvcmtzcGFjZUxlYWYgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFRhc2tUaW1lclZpZXcsIFZJRVdfVFlQRV9UQVNLX1RJTUVSIH0gZnJvbSBcIi4vdmlld1wiO1xuaW1wb3J0IFRhc2tDb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRhc2tUaW1lclBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHByaXZhdGUgY29udHJvbGxlciE6IFRhc2tDb250cm9sbGVyO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG5cdFx0XHR0aGlzLmNvbnRyb2xsZXIgPSBuZXcgVGFza0NvbnRyb2xsZXIodGhpcy5hcHApO1xuXHRcdFx0XG5cdFx0XHR0aGlzLnJlZ2lzdGVyVmlldyhcblx0XHRcdFx0VklFV19UWVBFX1RBU0tfVElNRVIsXG5cdFx0XHRcdChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5jb250cm9sbGVyLmxvYWRBcmNoaXZlKCk7XG5cdFx0XHRcdFx0Y29uc3QgdmlldyA9IG5ldyBUYXNrVGltZXJWaWV3KGxlYWYsIHRoaXMuY29udHJvbGxlcik7XG5cdFx0XHRcdFx0dGhpcy5jb250cm9sbGVyLmluaXRWaWV3KHZpZXcpO1xuXG5cdFx0XHRcdFx0cmV0dXJuIHZpZXc7XG5cdFx0XHRcdH1cblx0XHRcdCk7XG5cblx0XHRcdHRoaXMuYWRkUmliYm9uSWNvbihcImNsb2NrXCIsIFwiVGFzayBUaW1lclwiLCAoKSA9PiB0aGlzLmFjdGl2YXRlVmlldygpKTtcblx0XHRcdHRoaXMuYWRkQ29tbWFuZCh7IGlkOiBcIm9wZW4tdGFzay10aW1lclwiLCBuYW1lOiBcIk9wZW4gVGFzayBUaW1lclwiLCBjYWxsYmFjazogKCkgPT4gdGhpcy5hY3RpdmF0ZVZpZXcoKSB9KTtcblx0XHR9KVxuXHR9XG5cblx0YXN5bmMgb251bmxvYWQoKSB7XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfVEFTS19USU1FUikuZm9yRWFjaChsZWFmID0+IGxlYWYuZGV0YWNoKCkpO1xuXHR9XG5cblx0YXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuXHRcdGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1RBU0tfVElNRVIpO1xuXHRcdGlmIChsZWF2ZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRsZXQgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuXHRcdFx0aWYgKCFsZWFmKSB7XG5cdFx0XHRcdGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZighUGxhdGZvcm0uaXNEZXNrdG9wKTtcblx0XHRcdH1cblxuXHRcdFx0YXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiBWSUVXX1RZUEVfVEFTS19USU1FUiwgYWN0aXZlOiB0cnVlIH0pO1xuXHRcdH1cblxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1RBU0tfVElNRVIpWzBdKTtcblx0fVxufVxuIiwgIlxuaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIFNldHRpbmcsIEJ1dHRvbkNvbXBvbmVudCwgVGV4dENvbXBvbmVudCwgc2V0SWNvbiB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IFRhc2tDb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlcic7XG5pbXBvcnQgeyBmb3JtYXRUaW1lLCBmb3JtYXREdXJhdGlvbiwgY2FsY093bkR1cmF0aW9uIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgeyBUYXNrRW50cnkgfSBmcm9tIFwiLi90eXBlc1wiO1xuXG5leHBvcnQgY29uc3QgVklFV19UWVBFX1RBU0tfVElNRVIgPSBcInRhc2stdGltZXItdmlld1wiO1xuXG5leHBvcnQgY2xhc3MgVGFza1RpbWVyVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcblx0aW5wdXQhOiBUZXh0Q29tcG9uZW50O1xuXHRzdGFydEJ0biE6IEJ1dHRvbkNvbXBvbmVudDtcblx0ZW5kQnRuITogQnV0dG9uQ29tcG9uZW50O1xuXHRzdWJCdG4hOiBCdXR0b25Db21wb25lbnQ7XG5cblx0cHJpdmF0ZSBpbnRlcnZhbD86IG51bWJlcjtcblxuXHRwcml2YXRlIGFyY2hpdmVUYWJsZUVsITogSFRNTEVsZW1lbnQ7XG5cblx0cHJpdmF0ZSBjb250cm9sc0VsITogSFRNTEVsZW1lbnQ7XG5cblx0Y29uc3RydWN0b3IoXG5cdFx0bGVhZjogV29ya3NwYWNlTGVhZiwgXG5cdFx0cHJpdmF0ZSBjb250cm9sbGVyOiBUYXNrQ29udHJvbGxlclxuXHQpIHtcblx0XHRzdXBlcihsZWFmKTtcblx0fVxuXG5cdGdldFZpZXdUeXBlKCk6IHN0cmluZyB7IHJldHVybiBWSUVXX1RZUEVfVEFTS19USU1FUjsgfVxuXHRnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcgeyByZXR1cm4gXCJUYXNrIFRpbWVyXCI7IH1cblx0Z2V0SWNvbigpOiBzdHJpbmcgeyByZXR1cm4gXCJjbG9ja1wiOyB9XG5cblx0cmVhZEFuZENsZWFySW5wdXRWYWx1ZSgpOiBzdHJpbmcge1xuXHRcdGNvbnN0IHZhbHVlID0gIHRoaXMuaW5wdXQuZ2V0VmFsdWUoKTtcblx0XHR0aGlzLmlucHV0LnNldFZhbHVlKCcnKTtcblxuXHRcdHJldHVybiB2YWx1ZTtcblx0fVxuXG5cdHVwZGF0ZVZpZXcoKSB7XG5cdFx0dGhpcy5yZW5kZXJBcmNoaXZlVGFibGUoKTtcblx0fVxuXG5cdGdldENvbnRhaW5lcigpOiBIVE1MRWxlbWVudCB7XG5cdFx0Y29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbDtcblx0XHRjb250YWluZXIuZW1wdHkoKTtcblx0XHRyZXR1cm4gY29udGFpbmVyO1xuXHR9XG5cblx0cmVuZGVyQmFzZUVsZW1lbnRzKCkge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyKCk7XG5cdFx0XG5cdFx0dGhpcy5jb250cm9sc0VsID0gY29udGFpbmVyLmNyZWF0ZURpdigpO1xuXHRcdHRoaXMuYXJjaGl2ZVRhYmxlRWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInRhc2stdGltZXItYXJjaGl2ZVwiIH0pO1xuXHR9XG5cblx0cmVuZGVyQ29udHJvbEVsZW1lbnRzKCkge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udHJvbHNFbDtcblxuICAgIGNvbnN0IGNvbnRyb2xzID0gbmV3IFNldHRpbmcoY29udGFpbmVyKTtcbiAgICB0aGlzLmlucHV0ID0gbmV3IFRleHRDb21wb25lbnQoY29udHJvbHMuY29udHJvbEVsKVxuXHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiRS5nLiBCdXkgYSBtaWxrXCIpXG5cblx0XHR0aGlzLmlucHV0LmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsICh7a2V5fSkgPT4ge1xuXHRcdFx0aWYgKGtleSA9PT0gJ0VudGVyJykgeyBcblx0XHRcdFx0dGhpcy5jb250cm9sbGVyLmFwcGVuZFRhc2sodGhpcy5yZWFkQW5kQ2xlYXJJbnB1dFZhbHVlKCkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5pbnB1dC5pbnB1dEVsLmNsYXNzTGlzdC5hZGQoJ3Rhc2stdGltZXItaW5wdXQnKTtcblxuICAgIHRoaXMuc3ViQnRuID0gbmV3IEJ1dHRvbkNvbXBvbmVudChjb250cm9scy5jb250cm9sRWwpXG5cdFx0XHQuc2V0SWNvbigncGxheScpXG5cdFx0XHQuc2V0VG9vbHRpcCgnU3RhcnQgdGFzaycpXG5cdFx0XHQuc2V0Q2xhc3MoJ3Rhc2stdGltZXItYnV0dG9uJylcbiAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0dGhpcy5jb250cm9sbGVyLmFwcGVuZFRhc2sodGhpcy5yZWFkQW5kQ2xlYXJJbnB1dFZhbHVlKCkpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLmVuZEJ0biA9IG5ldyBCdXR0b25Db21wb25lbnQoY29udHJvbHMuY29udHJvbEVsKVxuXHRcdFx0LnNldEljb24oJ3BhdXNlJylcblx0XHRcdC5zZXRUb29sdGlwKCdTdG9wIGFsbCB0YXNrcycpXG5cdFx0XHQuc2V0Q2xhc3MoJ3Rhc2stdGltZXItYnV0dG9uJylcbiAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyLmVuZEFsbFRhc2tzKCk7XG4gICAgICB9KTtcblxuICAgIHRoaXMuc3RhcnRCdG4gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRyb2xzLmNvbnRyb2xFbClcblx0XHRcdC5zZXRJY29uKCdzdGVwLWZvcndhcmQnKVxuXHRcdFx0LnNldFRvb2x0aXAoJ1N0b3AgYWxsIGFuZCBzdGFydCB0YXNrJylcblx0XHRcdC5zZXRDbGFzcygndGFzay10aW1lci1idXR0b24nKVxuICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHR0aGlzLmNvbnRyb2xsZXIuc3RhcnROZXdUYXNrKHRoaXMucmVhZEFuZENsZWFySW5wdXRWYWx1ZSgpKTtcbiAgICAgIH0pO1xuXHR9XG5cblx0YXN5bmMgcnVuSW50ZXJ2YWwoKSB7XG5cdFx0dGhpcy51cGRhdGVWaWV3KCk7XG4gICAgLy8gdGhpcy5pbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCh0aGlzLnVwZGF0ZVZpZXcuYmluZCh0aGlzKSwgMTAwMCk7XG5cdFx0dGhpcy5yZWdpc3RlckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuXHR9XG5cblx0YXN5bmMgb25PcGVuKCkge1xuXHRcdGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyKCk7XG5cdFx0Y29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3Rhc2stdGltZXItY29udGFpbmVyJyk7XG5cdFx0Y29uc29sZS5sb2coNCk7XG5cblx0XHR0aGlzLnJlbmRlckJhc2VFbGVtZW50cygpO1xuXHRcdHRoaXMucmVuZGVyQ29udHJvbEVsZW1lbnRzKCk7XG5cdFx0dGhpcy5ydW5JbnRlcnZhbCgpO1xuXHR9XG5cblx0YXN5bmMgb25DbG9zZSgpIHtcblx0XHRpZiAodGhpcy5pbnRlcnZhbCkgd2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG5cdH1cblxuXHRwcml2YXRlIHJlbmRlckFyY2hpdmVUYWJsZSgpIHtcblx0XHRjb25zdCBjb250YWluZXIgPSB0aGlzLmFyY2hpdmVUYWJsZUVsO1xuXHRcdGNvbnRhaW5lci5lbXB0eSgpO1xuXG5cdFx0Y29uc3QgcmVuZGVyUm93ID0gKHRhc2s6IFRhc2tFbnRyeSkgPT4ge1xuXHRcdFx0Y29uc3QgaXNEb25lID0gISF0YXNrLmVuZFRpbWU7XG5cblx0XHRcdGNvbnN0IGJvZHkgPSBjb250YWluZXIuY3JlYXRlRGl2KHtcblx0XHRcdFx0Y2xzOiAndGFzay10aW1lci1pdGVtJ1xuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnN0IGxhYmVsRWwgPSBib2R5LmNyZWF0ZURpdih7XG5cdFx0XHRcdGNsczogW1xuXHRcdFx0XHRcdCd0YXNrLXRpbWVyLWl0ZW1fX2xhYmVsLXdyYXAnLFxuXHRcdFx0XHRcdGlzRG9uZSBcblx0XHRcdFx0XHRcdD8gJ3Rhc2stdGltZXItaXRlbV9fbGFiZWwtd3JhcC0tZG9uZScgXG5cdFx0XHRcdFx0XHQ6ICd0YXNrLXRpbWVyLWl0ZW1fX2xhYmVsLXdyYXAtLXJ1bm5pbmcnXG5cdFx0XHRcdF1cblx0XHRcdH0pO1xuXG5cdFx0XHRzZXRJY29uKGxhYmVsRWwuY3JlYXRlU3BhbigpLCBpc0RvbmUgPyAnY2lyY2xlLWNoZWNrLWJpZycgOiAnbG9hZGVyLWNpcmNsZScpXG5cdFx0XHRcblx0XHRcdGxhYmVsRWwuY3JlYXRlRWwoJ2gzJywge1xuXHRcdFx0XHR0ZXh0OiB0YXNrLm5hbWUsXG5cdFx0XHRcdGNsczogJ3Rhc2stdGltZXItaXRlbV9fbGFiZWwnXG5cdFx0XHR9KTtcblxuXHRcdFx0Y3JlYXRlVGltZShsYWJlbEVsKTtcblxuXHRcdFx0Ym9keS5jcmVhdGVTcGFuKHtcblx0XHRcdFx0dGV4dDogZm9ybWF0RHVyYXRpb24oY2FsY093bkR1cmF0aW9uKHRhc2suc3RhcnRUaW1lLCB0YXNrLmVuZFRpbWUpKSxcblx0XHRcdFx0Y2xzOiAndGFzay10aW1lci1pdGVtX19kYXRlJ1xuXHRcdFx0fSk7XG5cblx0XHRcdGJvZHkuY3JlYXRlRWwoJ2hyJywgeyBjbHM6ICd0YXNrLXRpbWVyLWl0ZW1fX2RlbGltaXRlcicgfSk7XG5cblx0XHRcdGZ1bmN0aW9uIGNyZWF0ZVRpbWUoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuXHRcdFx0XHRjb25zdCBkYXRlV3JhcHBlckVsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdwJywge1xuXHRcdFx0XHRcdGNsczogJ3Rhc2stdGltZXItaXRlbV9fdGltZSdcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0ZGF0ZVdyYXBwZXJFbC5jcmVhdGVTcGFuKHtcblx0XHRcdFx0XHR0ZXh0OiBmb3JtYXRUaW1lKHRhc2suc3RhcnRUaW1lKVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpZiAoaXNEb25lKSB7XG5cdFx0XHRcdFx0ZGF0ZVdyYXBwZXJFbC5jcmVhdGVTcGFuKHtcblx0XHRcdFx0XHRcdHRleHQ6ICcgLSAnLFxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0ZGF0ZVdyYXBwZXJFbC5jcmVhdGVTcGFuKHtcblx0XHRcdFx0XHRcdHRleHQ6IGZvcm1hdFRpbWUodGFzay5lbmRUaW1lKVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdGNvbnNvbGUubG9nKDEpO1xuXHRcdGNvbnNvbGUubG9nKHRoaXMuY29udHJvbGxlci5nZXRUYXNrcygpKVxuXG5cdFx0Zm9yIChjb25zdCBlIG9mIHRoaXMuY29udHJvbGxlci5nZXRUYXNrcygpKSByZW5kZXJSb3coZSk7XG5cdH1cbn1cbiIsICJpbXBvcnQgeyBUYXNrRW50cnkgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIHBhZChudW0/OiBudW1iZXIgfCBudWxsKTogc3RyaW5nIHtcblx0aWYgKCFudW0pIHJldHVybiAnMDAnO1xuXG4gIHJldHVybiBudW0udG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RHVyYXRpb24obXM6IG51bWJlcik6IHN0cmluZyB7XG4gIGlmIChtcyA8IDAgfHwgIU51bWJlci5pc0Zpbml0ZShtcykpIHJldHVybiBcIjA6MDA6MDBcIjtcbiAgY29uc3QgdG90YWxTZWMgPSBNYXRoLmZsb29yKG1zIC8gMTAwMCk7XG4gIGNvbnN0IGggPSBNYXRoLmZsb29yKHRvdGFsU2VjIC8gMzYwMCk7XG4gIGNvbnN0IG0gPSBNYXRoLmZsb29yKCh0b3RhbFNlYyAlIDM2MDApIC8gNjApO1xuICBjb25zdCBzID0gdG90YWxTZWMgJSA2MDtcblxuXHRsZXQgc3RyaW5nID0gJyc7XG5cblx0aWYgKGgpIHtcblx0XHRzdHJpbmcgKz0gYCR7aH1oYDtcblx0fVxuXG5cdGlmIChtKSB7XG5cdFx0c3RyaW5nICs9IGAgJHttfW1gO1xuXHR9XG5cblx0c3RyaW5nICs9IGAgJHtwYWQocyl9c2A7XG5cdFxuXHRyZXR1cm4gc3RyaW5nLnRyaW0oKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzb05vdygpOiBzdHJpbmcge1xuICByZXR1cm4gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJU08ocz86IHN0cmluZyB8IG51bGwpOiBEYXRlIHwgbnVsbCB7XG4gIGlmICghcykgcmV0dXJuIG51bGw7XG4gIGNvbnN0IGQgPSBuZXcgRGF0ZShzKTtcbiAgcmV0dXJuIGlzTmFOKGQuZ2V0VGltZSgpKSA/IG51bGwgOiBkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNTYW1lRGF5KGVudHJ5OiBUYXNrRW50cnkpOiBib29sZWFuIHtcblx0cmV0dXJuIGVudHJ5LnN0YXJ0VGltZS5zbGljZSgwLCAxMCkgPT09IGVudHJ5LmVuZFRpbWU/LnNsaWNlKDAsIDEwKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUoZGF0ZT86IHN0cmluZyB8IG51bGwpOiBzdHJpbmcge1xuXHRpZiAoIWRhdGUpIHJldHVybiAnJztcblxuXHRjb25zdCBwYXJzZWQgPSBwYXJzZUlTTyhkYXRlKTtcblxuXHRyZXR1cm4gYCR7cGFkKHBhcnNlZD8uZ2V0SG91cnMoKSl9OiR7cGFkKHBhcnNlZD8uZ2V0TWludXRlcygpKX06JHtwYWQocGFyc2VkPy5nZXRTZWNvbmRzKCkpfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjT3duRHVyYXRpb24oc3RhcnRJU08/OiBzdHJpbmcgfCBudWxsLCBlbmRJU08/OiBzdHJpbmcgfCBudWxsKTogbnVtYmVyIHtcbiAgY29uc3Qgc3RhcnQgPSBwYXJzZUlTTyhzdGFydElTTyk/LmdldFRpbWUoKTtcbiAgY29uc3QgZW5kID0gKGVuZElTTyA/IHBhcnNlSVNPKGVuZElTTykgOiBuZXcgRGF0ZSgpKT8uZ2V0VGltZSgpO1xuICBpZiAoIXN0YXJ0IHx8ICFlbmQpIHJldHVybiAwO1xuICByZXR1cm4gTWF0aC5tYXgoMCwgZW5kIC0gc3RhcnQpO1xufVxuIiwgImltcG9ydCB7IEFyY2hpdmUsIFRhc2tFbnRyeSB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgaXNvTm93IH0gZnJvbSAnLi91dGlscyc7XG5cbmV4cG9ydCBjbGFzcyBUaW1lck1vZGVsIHtcbiAgYXJjaGl2ZTogQXJjaGl2ZTtcblxuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzLmFyY2hpdmUgPSBuZXcgTWFwKCk7XG5cdH1cblxuXHRpbml0TW9kZWwoYXJjaGl2ZTogVGFza0VudHJ5W10pIHtcblx0XHRhcmNoaXZlLmZvckVhY2godGFzayA9PiB7XG5cdFx0XHR0aGlzLmFyY2hpdmUuc2V0KHRhc2suaWQsIHRhc2spO1xuXHRcdH0pO1xuXHR9XG5cblx0Z2V0RmxhdFRhc2tzKCk6IFRhc2tFbnRyeVtdIHtcblx0XHRyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmFyY2hpdmUudmFsdWVzKCkpLnNvcnQoKGEsIGIpID0+IHtcblx0XHRcdGlmIChhLnN0YXJ0VGltZSA8IGIuc3RhcnRUaW1lKSByZXR1cm4gMTtcblx0XHRcdHJldHVybiAtMTtcblx0XHR9KTtcblx0fVxuXG5cdGdldEZsYXRSdW5uaW5nVGFza3MoKTogVGFza0VudHJ5W10ge1xuXHRcdHJldHVybiB0aGlzLmdldEZsYXRUYXNrcygpLmZpbHRlcigoeyBlbmRUaW1lIH0pID0+ICFlbmRUaW1lKTtcblx0fVxuXG5cdGdldE5ld1Rhc2sobmFtZT86IHN0cmluZyk6IFRhc2tFbnRyeSB7XG5cdFx0Y29uc3QgaWQgPSBEYXRlLm5vdygpICsgJ2MnO1xuXG4gICAgaWYgKCFuYW1lPy50cmltKCkpIG5hbWUgPSBgQmxvY2sgJHt0aGlzLmdldEZsYXRUYXNrcygpLmxlbmd0aCArIDF9YDtcblxuXHRcdGNvbnNvbGUubG9nKGlzb05vdygpKTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRpZCxcblx0XHRcdG5hbWUsIFxuXHRcdFx0c3RhcnRUaW1lOiBpc29Ob3coKSwgXG5cdFx0XHRlbmRUaW1lOiBudWxsXG5cdFx0fTtcblx0fVxuXG5cdGFwcGVuZFRhc2sobmFtZTogc3RyaW5nKSB7XG4gICAgY29uc3Qgcm9vdDogVGFza0VudHJ5ID0gdGhpcy5nZXROZXdUYXNrKG5hbWUpO1xuXG4gICAgdGhpcy5hcmNoaXZlLnNldChyb290LmlkLCByb290KTtcblx0fVxuXG4gIGVuZFRhc2tCeUlkKGlkOiBzdHJpbmcpIHtcblx0XHRjb25zdCB0YXNrID0gdGhpcy5hcmNoaXZlLmdldChpZCk7XG5cblx0XHRpZiAodGFzaykge1xuXHRcdFx0dGFzay5lbmRUaW1lID0gaXNvTm93KCk7XHRcblx0XHR9XG4gIH1cblxuXHRlbmRBbGxUYXNrcygpIHtcblx0XHRmb3IoY29uc3QgdGFzayBvZiB0aGlzLmdldEZsYXRSdW5uaW5nVGFza3MoKSkge1xuXHRcdFx0dGFzay5lbmRUaW1lID0gaXNvTm93KCk7XG5cdFx0fVxuXHR9XG5cbiAgcmVuYW1lVGFza0J5SWQoaWQ6IHN0cmluZywgbmV3TmFtZTogc3RyaW5nKSB7XG5cdFx0Y29uc3QgdGFzayA9IHRoaXMuYXJjaGl2ZS5nZXQoaWQpO1xuXG5cdFx0aWYgKHRhc2spIHtcblx0XHRcdHRhc2submFtZSA9IG5ld05hbWUudHJpbSgpO1x0XG5cdFx0fVxuICB9XG5cblx0aW50ZXJzZWN0aW9uRHVyYXRpb24ocHJldlRhc2s6IFRhc2tFbnRyeSwgbmV4dFRhc2s6IFRhc2tFbnRyeSk6IG51bWJlciB7XG5cdFx0Y29uc3Qgc3RhcnRQcmV2ID0gRGF0ZS5wYXJzZShwcmV2VGFzay5zdGFydFRpbWUpO1xuXHRcdGNvbnN0IGVuZFByZXYgPSBEYXRlLnBhcnNlKHByZXZUYXNrLmVuZFRpbWUgfHwgaXNvTm93KCkpO1xuXHRcdGNvbnN0IHN0YXJ0TmV3ID0gRGF0ZS5wYXJzZShuZXh0VGFzay5zdGFydFRpbWUpO1xuXHRcdGNvbnN0IGVuZE5ldyA9IERhdGUucGFyc2UobmV4dFRhc2suZW5kVGltZSB8fCBpc29Ob3coKSk7XG5cblx0XHRpZiAoc3RhcnRQcmV2IDw9IHN0YXJ0TmV3ICYmIGVuZE5ldyA8PSBlbmRQcmV2KSB7XG5cdFx0XHRyZXR1cm4gc3RhcnRQcmV2IC0gZW5kUHJldjtcblx0XHR9XG5cblx0XHRpZiAoc3RhcnROZXcgPD0gc3RhcnRQcmV2ICYmIGVuZFByZXYgPD0gZW5kTmV3KSB7XG5cdFx0XHRyZXR1cm4gc3RhcnROZXcgLSBlbmROZXc7XG5cdFx0fVxuXG5cdFx0aWYgKHN0YXJ0UHJldiA8PSBzdGFydE5ldyAmJiBlbmRQcmV2IDw9IGVuZE5ldykge1xuXHRcdFx0cmV0dXJuIHN0YXJ0UHJldiAtIGVuZE5ldztcblx0XHR9XG5cblx0XHRpZiAoc3RhcnROZXcgPD0gc3RhcnRQcmV2ICYmIGVuZE5ldyA8PSBlbmRQcmV2KSB7XG5cdFx0XHRyZXR1cm4gc3RhcnROZXcgLSBlbmRQcmV2O1xuXHRcdH1cblxuXHRcdHJldHVybiAwO1xuXHR9XG5cbiAgZ2V0Q3VycmVudFRhc2tzRHVyYXRpb24oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGdldE92ZXJhbGxSdW5uaW5nRHVyYXRpb24oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMDtcbiAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IFRhc2tFbnRyeSwgVGltZWtlZXBUYXNrRW50cnkgfSBmcm9tICcuL3R5cGVzJztcblxuZXhwb3J0IGNvbnN0IEFSQ0hJVkVfUEFUSCA9IFwiYXJjaGl2ZS5tZFwiOyAvLyBcdTA0MUFcdTA0M0VcdTA0NDBcdTA0MzVcdTA0M0RcdTA0NEMgXHUwNDQ1XHUwNDQwXHUwNDMwXHUwNDNEXHUwNDM4XHUwNDNCXHUwNDM4XHUwNDQ5XHUwNDMwXG5cbmV4cG9ydCBjbGFzcyBUYXNrU3RvcmFnZSB7XG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgYXBwOiBBcHApIHsgfVxuXG5cdGFzeW5jIGxvYWRBcmNoaXZlKCk6IFByb21pc2U8VGFza0VudHJ5W10+IHtcdFx0XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRGaWxlQnlQYXRoKEFSQ0hJVkVfUEFUSCk7XG5cblx0XHRcdGlmICghZmlsZSkgcmV0dXJuIFtdO1xuXHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSBhcyBURmlsZSk7XG5cblx0XHRcdGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvYGBganNvblxcbihbXFxzXFxTXSo/KVxcbmBgYC8pO1xuXHRcdFx0aWYgKCFtYXRjaCkgcmV0dXJuIFtdO1xuXG5cdFx0XHRyZXR1cm4gdGhpcy5mcm9tVGltZWtlZXBGb3JtYXQobWF0Y2hbMV0pO1xuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoZSk7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgc2F2ZUFyY2hpdmUodGFza3M6IFRhc2tFbnRyeVtdKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZGF0YSA9IHRoaXMudG9UaW1la2VlcEZvcm1hdEpTT04odGFza3MpO1xuXHRcdGNvbnN0IG1kQ29udGVudCA9IGBcXGBcXGBcXGBqc29uXFxuJHtkYXRhfVxcblxcYFxcYFxcYGA7XG5cblx0XHRjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKEFSQ0hJVkVfUEFUSCk7XG5cdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuXHRcdFx0Y29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSBhcyBURmlsZSk7XG5cdFx0XHRjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goL2BgYGpzb25cXG4oW1xcc1xcU10qPylcXG5gYGAvKTtcblx0XHRcdGxldCBhcHBlbmRDb250ZW50ID0gJyc7XG5cdFx0XHRjb25zdCBpbmRleCA9IG1hdGNoID8gKG1hdGNoLmluZGV4ID8/IC0xKSA6IC0xO1xuXG5cdFx0XHRpZiAobWF0Y2ggJiYgaW5kZXggPiAtMSkge1xuXHRcdFx0XHRhcHBlbmRDb250ZW50ID0gY29udGVudC5zbGljZSgwLCBpbmRleCkgK1xuXHRcdFx0XHRcdG1kQ29udGVudCArXG5cdFx0XHRcdFx0Y29udGVudC5zbGljZShpbmRleCArIG1hdGNoWzBdLmxlbmd0aCk7XHRcdFx0XHRcdFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YXBwZW5kQ29udGVudCA9IGNvbnRlbnQgKyAnXFxuJyArIG1kQ29udGVudDtcblx0XHRcdH1cblxuXHRcdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGFwcGVuZENvbnRlbnQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoQVJDSElWRV9QQVRILCBtZENvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdHRvVGltZWtlZXBGb3JtYXRKU09OKHRhc2tzOiBUYXNrRW50cnlbXSk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdGVudHJpZXM6IHRhc2tzXG5cdFx0fSk7XG5cdH1cblxuXHRtYXBUaW1la2VlcEVudHJ5KGVudHJ5OiBUaW1la2VlcFRhc2tFbnRyeSB8IFRhc2tFbnRyeSwgbmFtZT86IHN0cmluZyk6IFRhc2tFbnRyeSB7XG5cdFx0aWYgKCdzdWJFbnRyaWVzJyBpbiBlbnRyeSkge1xuXHRcdFx0Y29uc3QgeyBzdWJFbnRyaWVzOiBfLCAuLi50YXNrIH0gPSBlbnRyeTtcblxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0Li4udGFzayxcblx0XHRcdFx0bmFtZTogbmFtZSAmJiAhbmFtZS5zdGFydHNXaXRoKCdQYXJ0JykgPyBuYW1lIDogdGFzay5uYW1lLFxuXHRcdFx0XHRpZDogU3RyaW5nKE1hdGgucmFuZG9tKCkpXG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdHJldHVybiBlbnRyeTtcblx0fVxuXG5cdGZsYXR0ZW5UaW1la2VlcFN1YkVudHJpZXModGFza3M6IFRpbWVrZWVwVGFza0VudHJ5W10gfCBudWxsLCBuYW1lPzogc3RyaW5nKTogVGFza0VudHJ5W10ge1xuXHRcdGlmICghdGFza3M/Lmxlbmd0aCkgcmV0dXJuIFtdO1xuXG5cdFx0cmV0dXJuIHRhc2tzLmZsYXRNYXAoZW50cnkgPT4ge1xuXHRcdFx0aWYgKGVudHJ5LnN1YkVudHJpZXM/Lmxlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5mbGF0dGVuVGltZWtlZXBTdWJFbnRyaWVzKGVudHJ5LnN1YkVudHJpZXMsIGVudHJ5Lm5hbWUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIFsgdGhpcy5tYXBUaW1la2VlcEVudHJ5KGVudHJ5LCBuYW1lKSBdO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0ZnJvbVRpbWVrZWVwRm9ybWF0KGpzb246IHN0cmluZyk6IFRhc2tFbnRyeVtdIHtcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgZGF0YSA9IEpTT04ucGFyc2UoanNvbik7XG5cdFx0XHRjb25zdCBlbnRyaWVzOiBUaW1la2VlcFRhc2tFbnRyeVtdID0gZGF0YS5lbnRyaWVzO1xuXG5cdFx0XHRyZXR1cm4gdGhpcy5mbGF0dGVuVGltZWtlZXBTdWJFbnRyaWVzKGVudHJpZXMpO1xuXHRcdH0gY2F0Y2goZSkge1xuXHRcdFx0Y29uc29sZS5sb2coZSk7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fVxuXHR9XG59XG4iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgVGltZXJNb2RlbCB9IGZyb20gXCIuL21vZGVsXCI7XG5pbXBvcnQgeyBUYXNrVGltZXJWaWV3IH0gZnJvbSAnLi92aWV3JztcbmltcG9ydCB7IFRhc2tTdG9yYWdlIH0gZnJvbSAnLi9zdG9yYWdlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGFza0NvbnRyb2xsZXIge1xuXHRwcml2YXRlIHZpZXchOiBUYXNrVGltZXJWaWV3XG5cdHByaXZhdGUgbW9kZWwhOiBUaW1lck1vZGVsXG5cdHByaXZhdGUgc3RvcmFnZSE6IFRhc2tTdG9yYWdlXG5cblx0Y29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge1xuXHRcdHRoaXMuc3RvcmFnZSA9IG5ldyBUYXNrU3RvcmFnZSh0aGlzLmFwcCk7XG5cdFx0dGhpcy5tb2RlbCA9IG5ldyBUaW1lck1vZGVsKCk7XG5cdH1cblxuXHRnZXRUYXNrcygpIHtcblx0XHRyZXR1cm4gdGhpcy5tb2RlbC5nZXRGbGF0VGFza3MoKVxuXHR9XG5cblx0Z2V0UnVubmluZ1Rhc2tzKCkge1xuXHRcdHJldHVybiB0aGlzLm1vZGVsLmdldEZsYXRSdW5uaW5nVGFza3MoKVxuXHR9XG5cblx0YXN5bmMgbG9hZEFyY2hpdmUoKSB7XG5cdFx0Y29uc3QgYXJjaGl2ZSA9IGF3YWl0IHRoaXMuc3RvcmFnZS5sb2FkQXJjaGl2ZSgpO1xuXHRcdHRoaXMubW9kZWwuaW5pdE1vZGVsKGFyY2hpdmUpO1xuXHRcdGNvbnNvbGUubG9nKDIpO1xuXHR9XG5cblx0YXN5bmMgaW5pdFZpZXcodmlldzogVGFza1RpbWVyVmlldykge1xuXHRcdHRoaXMudmlldyA9IHZpZXc7XG5cdFx0Y29uc29sZS5sb2coMyk7XG5cdH1cblxuXHRzdGFydE5ld1Rhc2sobmFtZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5tb2RlbC5lbmRBbGxUYXNrcygpO1xuXHRcdHRoaXMubW9kZWwuYXBwZW5kVGFzayhuYW1lKTtcblx0XHR0aGlzLnZpZXcudXBkYXRlVmlldygpO1xuXHRcdHRoaXMuc3RvcmFnZS5zYXZlQXJjaGl2ZSh0aGlzLm1vZGVsLmdldEZsYXRUYXNrcygpKTtcblx0fVxuXG5cdGFwcGVuZFRhc2sobmFtZTogc3RyaW5nKSB7XG5cdFx0dGhpcy5tb2RlbC5hcHBlbmRUYXNrKG5hbWUpO1xuXHRcdHRoaXMudmlldy51cGRhdGVWaWV3KCk7XG5cdFx0dGhpcy5zdG9yYWdlLnNhdmVBcmNoaXZlKHRoaXMubW9kZWwuZ2V0RmxhdFRhc2tzKCkpO1xuXHR9XG5cblx0ZW5kQWxsVGFza3MoKSB7XG5cdFx0dGhpcy5tb2RlbC5lbmRBbGxUYXNrcygpO1xuXHRcdHRoaXMudmlldy51cGRhdGVWaWV3KCk7XG5cdFx0dGhpcy5zdG9yYWdlLnNhdmVBcmNo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
